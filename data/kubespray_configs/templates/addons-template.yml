# Kubespray Addons 配置範本
# 定義 Kubernetes 叢集的附加元件配置

# Helm 配置
helm_enabled: true
helm_version: "v3.14.0"
helm_stable_repo_url: "https://charts.helm.sh/stable"

# MetalLB (裸機負載均衡器)
metallb_enabled: false
metallb_version: "v0.13.12"
metallb_namespace: "metallb-system"
metallb_config:
  address_pools:
    primary:
      ip_range:
        - "192.168.1.240-192.168.1.250"
      protocol: "layer2"

# Ingress Controller
ingress_nginx_enabled: true
ingress_nginx_version: "v1.9.5"
ingress_nginx_namespace: "ingress-nginx"
ingress_nginx_class: "nginx"

# Cert-Manager (憑證管理)
cert_manager_enabled: false
cert_manager_version: "v1.13.3"
cert_manager_namespace: "cert-manager"

# Local Path Provisioner (本地儲存)
local_path_provisioner_enabled: true
local_path_provisioner_version: "v0.0.24"
local_path_provisioner_namespace: "local-path-storage"
local_path_provisioner_storage_class: "local-path"
local_path_provisioner_reclaim_policy: Delete
local_path_provisioner_claim_root: "/opt/local-path-provisioner"

# Registry (私有映像倉庫)
registry_enabled: false
registry_namespace: "kube-system"
registry_storage_class: ""
registry_disk_size: "10Gi"

# Dashboard
dashboard_enabled: false
dashboard_version: "v2.7.0"
dashboard_namespace: "kubernetes-dashboard"

# Metrics Server
metrics_server_enabled: true
metrics_server_version: "v0.7.0"
metrics_server_kubelet_insecure_tls: true
metrics_server_metric_resolution: "15s"

# Node Problem Detector
node_problem_detector_enabled: false
node_problem_detector_version: "v0.8.12"

# Cluster Autoscaler
cluster_autoscaler_enabled: false

# External DNS
external_dns_enabled: false

# Prometheus (監控)
prometheus_enabled: false
prometheus_version: "v2.48.1"
prometheus_namespace: "monitoring"

# Grafana (監控視覺化)
grafana_enabled: false
grafana_version: "9.5.15"
grafana_namespace: "monitoring"

# Elasticsearch (日誌)
elasticsearch_enabled: false

# Fluentd (日誌收集)
fluentd_enabled: false

# Kibana (日誌視覺化)
kibana_enabled: false

# Istio (服務網格)
istio_enabled: false

# Kata Containers (安全容器運行時)
kata_containers_enabled: false

# Falco (安全監控，CKS 考試可能需要)
falco_enabled: false
falco_version: "3.8.4"

# Registry Creds (登入憑證管理)
registry_creds_enabled: false

# Snapshot Controller
snapshot_controller_enabled: false

# NFS 客戶端 Provisioner
nfs_provisioner_enabled: false

# Rook Ceph (分散式儲存)
rook_ceph_enabled: false

# CSI Drivers
csi_cinder_enabled: false
csi_aws_ebs_enabled: false
csi_gce_pd_enabled: false
csi_azure_enabled: false
csi_vsphere_enabled: false
csi_cephfs_enabled: false
csi_rbd_enabled: false

# 考試環境特定 Addons
exam_addons:
  # 基本工具 Pod (考試環境有用)
  debug_tools_enabled: true
  # 包含 curl, dig, nslookup 等工具的 Pod

  # NetworkPolicy 測試工具
  netpol_test_enabled: false

  # 儲存測試工具
  storage_test_enabled: false

# Kubelet CSI 驅動程式註冊
kubelet_csi_plugin_dir: "/var/lib/kubelet/plugins"