# Kubespray Inventory 範本
# 此檔案定義 Kubernetes 叢集中的主機清單和角色分配

[all]
# 將被動態替換的節點配置
# 格式：node-name ansible_host=IP ansible_user=USERNAME

[kube_control_plane]
# Master 節點 (控制平面)
# 將從 VM 配置中動態生成

[etcd]
# etcd 節點 (通常與 master 節點相同)
# 將從 VM 配置中動態生成

[kube_node]
# Worker 節點
# 將從 VM 配置中動態生成

[calico_rr]
# Calico Route Reflector 節點 (大型叢集使用)
# 考試環境通常不需要

[k8s_cluster:children]
kube_control_plane
kube_node
calico_rr

[all:vars]
# SSH 連線設定
ansible_ssh_private_key_file=/root/.ssh/id_rsa
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_ssh_extra_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'

# Python 解釋器路徑
ansible_python_interpreter=/usr/bin/python3

# 通用變數
become=yes
become_method=sudo

# Kubernetes 配置
# 這些值會被動態覆蓋
kube_version=v1.29.1
kube_network_plugin=calico
kube_service_addresses=10.233.0.0/18
kube_pods_subnet=10.233.64.0/18
cluster_name=k8s-exam-cluster

# 考試環境特定設定
exam_mode=true
bootstrap_os=ubuntu

# Containerd 配置
container_manager=containerd

# DNS 配置
dns_mode=coredns
enable_nodelocaldns=false

# 授權配置
authorization_modes=['Node', 'RBAC']
rbac_enabled=true

# 本地儲存
local_path_provisioner_enabled=true

# Ingress
ingress_nginx_enabled=true

# Metrics
metrics_server_enabled=true

# 考試環境優化
download_run_once=true
download_localhost=false

# 升級設定
drain_nodes=true
drain_timeout=120