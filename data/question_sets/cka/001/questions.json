{
  "set_info": {
    "exam_type": "CKA",
    "set_id": "001",
    "name": "CKA 基礎模擬測驗"
  },
  "questions": [
    {
      "id": 1,
      "content": "## 任務 1：建立 Pod 和 Service\n\n在 `default` namespace 中建立一個名為 `web-app` 的 Pod，使用 `nginx:1.20` 映像，並將容器的 80 埠暴露出來。\n\n接著建立一個名為 `web-service` 的 Service，類型為 `ClusterIP`，將 Service 的 80 埠對應到 Pod 的 80 埠。\n\n### 驗證要求\n- Pod 必須處於 Running 狀態\n- Service 必須能夠正確路由到 Pod\n- 使用 `curl` 測試 Service 可以回應",
      "weight": 30.0,
      "kubernetes_objects": ["Pod", "Service"],
      "hints": [
        "使用 kubectl run 命令建立 Pod",
        "使用 kubectl expose 命令建立 Service",
        "檢查 Pod 狀態使用 kubectl get pods"
      ],
      "verification_scripts": ["q1_verify_pod_service.sh"],
      "preparation_scripts": ["setup_namespace.sh"]
    },
    {
      "id": 2,
      "content": "## 任務 2：網路政策配置\n\n建立一個 NetworkPolicy，命名為 `deny-all-ingress`，套用到 `default` namespace 中所有帶有標籤 `app=restricted` 的 Pod。\n\n這個 NetworkPolicy 應該：\n- 拒絕所有入站流量\n- 允許來自帶有標籤 `role=frontend` 的 Pod 的流量\n- 僅允許 TCP 埠 8080 的流量\n\n### 驗證要求\n- NetworkPolicy 必須正確建立\n- 政策必須正確套用到目標 Pod\n- 符合規則的流量可以通過，其他流量被拒絕",
      "weight": 40.0,
      "kubernetes_objects": ["NetworkPolicy", "Pod"],
      "hints": [
        "使用 YAML 檔案定義 NetworkPolicy",
        "注意 podSelector 的語法",
        "測試時需要建立測試 Pod"
      ],
      "verification_scripts": ["q2_verify_network_policy.sh"],
      "preparation_scripts": ["setup_test_pods.sh"]
    },
    {
      "id": 3,
      "content": "## 任務 3：持久化儲存配置\n\n建立一個 PersistentVolume (PV) 和 PersistentVolumeClaim (PVC)，然後將其掛載到 Pod 中。\n\n要求：\n1. 建立名為 `data-pv` 的 PV：\n   - 容量：1Gi\n   - 存取模式：ReadWriteOnce\n   - 使用 `hostPath` 類型，路徑為 `/tmp/data`\n\n2. 建立名為 `data-pvc` 的 PVC：\n   - 請求容量：500Mi\n   - 存取模式：ReadWriteOnce\n\n3. 建立名為 `storage-pod` 的 Pod：\n   - 使用 `busybox` 映像\n   - 將 PVC 掛載到 `/data` 目錄\n   - 命令：`sleep 3600`\n\n### 驗證要求\n- PV 和 PVC 必須成功綁定\n- Pod 必須正常運行\n- 可以在掛載點寫入和讀取檔案",
      "weight": 30.0,
      "kubernetes_objects": ["PersistentVolume", "PersistentVolumeClaim", "Pod"],
      "hints": [
        "先建立 PV，再建立 PVC",
        "確保 PV 和 PVC 的規格匹配",
        "檢查綁定狀態使用 kubectl get pv,pvc"
      ],
      "verification_scripts": ["q3_verify_storage.sh"],
      "preparation_scripts": ["setup_hostpath.sh"]
    }
  ]
}